# Gradar - Система управления учебным процессом

Gradar - это RESTful API для управления учебным процессом, разработанный с использованием Django REST Framework. Система позволяет управлять курсами, группами студентов, занятиями, оценками и посещаемостью.

## Основные возможности

- **Аутентификация и авторизация**
  - JWT-based аутентификация
  - Разделение ролей на преподавателей и студентов
  - Защита эндпоинтов на основе ролей

- **Управление курсами**
  - Создание и редактирование курсов
  - Назначение групп на курс
  - Просмотр оценок студента по курсу

- **Управление группами**
  - Создание и редактирование групп
  - Добавление/удаление студентов
  - Массовое добавление студентов
  - Просмотр списка студентов группы

- **Управление занятиями**
  - Создание занятий для курса
  - Выставление оценок
  - Массовое выставление оценок
  - Отметка посещаемости

## Технический стек

- Python 3.8+
- Django 4.x
- Django REST Framework
- JWT для аутентификации
- PostgreSQL

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone https://github.com/your-username/gradar.git
cd gradar
```

2. Создайте и активируйте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate     # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Примените миграции:
```bash
python manage.py migrate
```

5. Запустите сервер:
```bash
python manage.py runserver
```

## API Endpoints

### Аутентификация
- `POST /api/token/` - Получение JWT токена
- `POST /api/token/refresh/` - Обновление JWT токена

### Курсы
- `GET /api/courses/` - Список курсов
- `POST /api/courses/` - Создание курса
- `GET /api/courses/{id}/` - Детали курса
- `PUT/PATCH /api/courses/{id}/` - Обновление курса
- `DELETE /api/courses/{id}/` - Удаление курса
- `POST /api/courses/{id}/add-group/` - Добавление группы на курс
- `GET /api/courses/{id}/my-grades/` - Оценки студента по курсу

### Группы
- `GET /api/groups/` - Список групп
- `POST /api/groups/` - Создание группы
- `GET /api/groups/{id}/` - Детали группы
- `PUT/PATCH /api/groups/{id}/` - Обновление группы
- `DELETE /api/groups/{id}/` - Удаление группы
- `GET /api/groups/{id}/list-students/` - Список студентов группы
- `POST /api/groups/{id}/add-student/` - Добавление студента в группу
- `POST /api/groups/{id}/remove-student/` - Удаление студента из группы
- `POST /api/groups/{id}/bulk-add-students/` - Массовое добавление студентов

### Занятия
- `GET /api/lessons/` - Список занятий
- `POST /api/lessons/` - Создание занятия
- `GET /api/lessons/{id}/` - Детали занятия
- `PUT/PATCH /api/lessons/{id}/` - Обновление занятия
- `DELETE /api/lessons/{id}/` - Удаление занятия
- `POST /api/lessons/{id}/bulk-grades/` - Массовое выставление оценок

### Оценки
- `GET /api/grades/` - Список оценок
- `POST /api/grades/` - Выставление оценки
- `GET /api/grades/{id}/` - Детали оценки
- `PUT/PATCH /api/grades/{id}/` - Обновление оценки
- `DELETE /api/grades/{id}/` - Удаление оценки

### Посещаемость
- `GET /api/attendance/` - Список посещаемости
- `POST /api/attendance/` - Отметка посещаемости
- `GET /api/attendance/{id}/` - Детали посещаемости
- `PUT/PATCH /api/attendance/{id}/` - Обновление посещаемости
- `DELETE /api/attendance/{id}/` - Удаление отметки

## Тестирование

Проект использует pytest для тестирования. Для запуска тестов выполните:

```bash
pytest
```

## Правила доступа

- **Преподаватели** могут:
  - Создавать и управлять курсами
  - Создавать и управлять группами
  - Добавлять/удалять студентов из групп
  - Создавать занятия
  - Выставлять оценки
  - Отмечать посещаемость

- **Студенты** могут:
  - Просматривать свои курсы
  - Просматривать свои оценки
  - Просматривать свою посещаемость
  - Просматривать информацию о своей группе

## Валидация

- Студент может быть только в одной группе
- Оценки выставляются по 100-балльной шкале
- Занятия нельзя создавать в прошлом
- Преподаватель может управлять только своими курсами
- Год курса не может быть меньше 2024

## Развертывание с помощью Docker

### Предварительные требования

- Установленный Docker
- Установленный Docker Compose (опционально)

### Сборка и запуск с помощью Docker

1. Соберите Docker образ:
```bash
docker build -t gradar .
```

2. Запустите контейнер:
```bash
docker run -p 8000:8000 gradar
```

После этого приложение будет доступно по адресу http://localhost:8000

### Переменные окружения

При запуске контейнера вы можете указать следующие переменные окружения:

- `DATABASE_URL` - URL подключения к базе данных
- `SECRET_KEY` - секретный ключ Django
- `DEBUG` - режим отладки (True/False)

Пример запуска с переменными окружения:
```bash
docker run -p 8000:8000 \
  -e DATABASE_URL=postgres://user:password@db:5432/gradar \
  -e SECRET_KEY=your-secret-key \
  -e DEBUG=False \
  gradar
```
